{
  "steps": [
    {
      "id": "select_dropin_or_new_dropin",
      "title": "Select Drop-in or Create a New Drop-in Folder",
      "required_inputs": [
        {
          "name": "dropin_choice",
          "type": "enum",
          "prompt": "Would you like to use an existing drop-in folder or create a new one?",
          "options": [
            {"value": "existing", "label": "Use Existing Drop-in Folder"},
            {"value": "new", "label": "Create New Drop-in Folder"}
          ]
        }
      ]
    },
    {
      "id": "choose_existing_dropin",
      "include_if": {
        "select_dropin_or_new_dropin.dropin_choice": "existing"
      },
      "title": "Choose Existing Drop-in Folder",
      "required_inputs": [
        {
          "name": "existing_dropin",
          "type": "enum",
          "prompt": "Select an existing drop-in folder to use:",
          "options_source": {
            "type": "function",
            "name": "get_existing_dropins_js",
            "args": {
              "node_id": {"$from": "meta.node_id"}
            }
          }
        }
      ]
    },
    {
      "id": "create_new_dropin",
      "include_if": {
        "select_dropin_or_new_dropin.dropin_choice": "new"
      },
      "title": "Create New Drop-in Folder",
      "required_inputs": [
        {
          "name": "new_dropin_name",
          "type": "string",
          "prompt": "Enter the name for the new drop-in folder:"
        }
      ]
    },
    {
      "id": "select_action_or_new_action",
      "include_if": {
        "select_dropin_or_new_dropin.dropin_choice": "existing"
      },
      "title": "Select Existing Action or Create New Action",
      "required_inputs": [
        {
          "name": "action_choice",
          "type": "enum",
          "prompt": "Would you like to use an existing action or create a new one?",
          "options_source": {
            "type": "function",
            "name": "get_action_choice_js",
            "args": {
              "dropin_choice": {"$from": "answers.select_dropin_or_new_dropin.dropin_choice"}
            }
          }
        }
      ]
    },
    {
      "id": "choose_existing_action",
      "include_if": {
        "select_action_or_new_action.action_choice": "existing"
      },
      "title": "Choose Existing Action",
      "required_inputs": [
        {
          "name": "existing_action",
          "type": "enum",
          "prompt": "Select an existing action to use for the event:",
          "options_source": {
            "type": "function",
            "name": "get_existing_actions_js",
            "args": {
              "dropin": {"$from": "answers.choose_existing_dropin.existing_dropin"},
              "node_id": {"$from": "meta.node_id"},
              "event_type": {"$from": "meta.event_type"}
            }
          }
        }
      ]
    },
    {
      "id": "create_new_action",
      "include_if": {
        "select_action_or_new_action.action_choice": "new"
      },
      "title": "Create New Action",
      "required_inputs": [
        {
          "name": "new_action_name",
          "type": "action_name",
          "prompt": "Enter the name for the new action (e.g. set-item):"
        }
      ]
    },
    {
      "id": "select_event_trigger",
      "title": "Select Event Trigger",
      "required_inputs": [
        {
          "name": "item_event_trigger",
          "type": "string",
          "prompt": "Which event trigger would you like to use?"
        }
      ]
    },
    {
      "id": "confirm_creation",
      "title": "Confirm Event Creation",
      "required_inputs": [
        {
          "name": "confirm_creation",
          "type": "boolean",
          "prompt": "Do you want to create the event with the provided settings?"
        }
      ]
    }
  ]
}